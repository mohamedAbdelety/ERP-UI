<div class="page-top-line">
    <h1 class="page-title"> إدارة - <span class="fw-semi-bold">المستخدمين</span></h1>
</div>
<section widgster [reloadControl]="false" [fullscreenControl]="false" [collapseControl]="false" [loading]="!users">
    <h5 *widgsterTitle>قائمة المستخدمين</h5>
    <button (click)="createNewUser()" class="btn btn-success mb-3">إنشاء المستخدم</button>
    <ngx-datatable class="table table-striped table-hover" [rows]="users" [columnMode]="columnMode.force" [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'" [limit]="10">

        <ngx-datatable-column name="الكود" cellClass="width-100" headerClass="width-100">
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.id}}
            </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="الاسم" cellClass="width-100" headerClass="width-100">
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.name}}
            </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="الوظيفة" cellClass="width-100" headerClass="width-100">
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.role}}
            </ng-template>
        </ngx-datatable-column>


        <ngx-datatable-column name="الإجراءات">
            <ng-template let-row="row" ngx-datatable-cell-template>
                <div class="btn-toolbar">
                    <button class="btn btn-xs btn-info" [routerLink]="['/app/users/' + row.id+'/edit']" routerLinkActive="router-link-active">
            <span class="d-none d-md-inline-block">تعديل</span>
            <span class="d-md-none"><i class='la la-edit'></i></span>
          </button>
                    <button [popover]="deletePopover" [popoverContext]="row" #pop="bs-popover" placement="bottom" class="btn btn-xs btn-danger">
            <span class="d-none d-md-inline-block">حذف</span>
            <span class="d-md-none"><i class='la la-remove'></i></span>
          </button>
                    <ng-template #deletePopover let-id="id">
                        <div class="popover-title popover-header">
                            <div class="px-5">هل متأكد من حذف هذا العنصر؟</div>
                        </div>
                        <div class="popover-product-body d-flex justify-content-center">
                            <div class="btn-toolbar">
                                <button class="btn btn-xs btn-success" (click)="delete(row.id);pop.hide()">
                  نعم
                </button>
                                <button class="btn btn-xs btn-danger" (click)="pop.hide()">
                  لا
                </button>
                            </div>
                        </div>
                    </ng-template>
                </div>
            </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-footer>
            <ng-template ngx-datatable-footer-template let-rowCount="rowCount" let-pageSize="pageSize" let-selectedCount="selectedCount" let-curPage="curPage" let-offset="offset" let-isVisible="isVisible">
                <div class="container">
                    العدد: {{rowCount}}
                </div>
            </ng-template>
        </ngx-datatable-footer>
    </ngx-datatable>
</section>
